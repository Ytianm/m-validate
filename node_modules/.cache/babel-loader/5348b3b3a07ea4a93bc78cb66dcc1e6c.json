{"remainingRequest":"/Users/ytm/Documents/web/Vue/validate/node_modules/babel-loader/lib/index.js!/Users/ytm/Documents/web/Vue/validate/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ytm/Documents/web/Vue/validate/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ytm/Documents/web/Vue/validate/src/form/m-form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ytm/Documents/web/Vue/validate/src/form/m-form.vue","mtime":1575172483497},{"path":"/Users/ytm/Documents/web/Vue/validate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ytm/Documents/web/Vue/validate/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ytm/Documents/web/Vue/validate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ytm/Documents/web/Vue/validate/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogdGhpcwogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBtb2RlbDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcnVsZXM6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsZXM6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8g57yT5a2Y6ZyA6KaB5qCh6aqM55qE6KGo5Y2V6aG5CiAgICB0aGlzLiRvbigiZm9ybUl0ZW1BZGQiLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gX3RoaXMuZmlsZXMucHVzaChpdGVtKTsKICAgIH0pOwogICAgY29uc29sZS5sb2codGhpcy5maWxlcyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDlsIZGb3JtSXRlbeaVsOe7hOi9rOaNouS4uiB2YWxpZGF0ZSgpIOi/lOWbnueahHByb21pc2XmlbDnu4QKICAgIC8vIOiwg+eUqCBMRm9ybSDnu4Tku7bnmoQgdmFsaWRhdGUg5pa55rOV5Y+v5Lul5b6X5Yiw6KGo5Y2V5pWw5o2u5qCh6aqM55qE57uT5p6cCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoY2FsbGJhY2spIHsKICAgICAgdmFyIHRhc2tzLCByZXN1bHRzLCByZXQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gdmFsaWRhdGUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRhc2tzID0gdGhpcy5maWxlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza3MpOyAvLyDojrflj5bmiYDmnInnu5Pmnpznu5/kuIDlpITnkIYKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChQcm9taXNlLmFsbCh0YXNrcykpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3VsdHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHJldCA9IHRydWU7CiAgICAgICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICAgICAgICByZXQgPSBmYWxzZTsgLy8g5Y+q6KaB5LiA5Liq5aSx6LSl5bCx5aSx6LSlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FsbGJhY2socmV0KTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["m-form.vue"],"names":[],"mappings":";;;;;;;;;;;;AAMA,eAAA;AACA,EAAA,OADA,qBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AALA,GANA;AAeA,EAAA,IAfA,kBAeA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AADA,KAAA;AAGA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AAAA;;AACA;AACA,SAAA,GAAA,CAAA,aAAA,EAAA,UAAA,IAAA;AAAA,aAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AAAA,KAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA;AACA;AACA,IAAA,QAHA,oBAGA,QAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,cAAA,KAJA,GAIA,KAAA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,uBAAA,IAAA,CAAA,QAAA,EAAA;AAAA,eAAA,CAJA;AAKA,cAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EALA,CAOA;;AAPA;AAAA,8CAQA,OAAA,CAAA,GAAA,CAAA,KAAA,CARA;;AAAA;AAQA,cAAA,OARA;AAUA,cAAA,GAVA,GAUA,IAVA;AAWA,cAAA,OAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,oBAAA,CAAA,KAAA,EAAA;AACA,kBAAA,GAAA,GAAA,KAAA,CADA,CACA;AACA;AACA,eAJA;AAKA,cAAA,QAAA,CAAA,GAAA,CAAA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAzBA,CAAA","sourcesContent":["<template>\n  <form>\n    <slot></slot>\n  </form>\n</template>\n<script>\nexport default {\n  provide() {\n    return {\n      form: this\n    };\n  },\n  props: {\n    model: {\n      type: Object,\n      required: true\n    },\n    rules: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      files: []\n    }\n  },\n  created() {\n    // 缓存需要校验的表单项\n    this.$on(\"formItemAdd\", item => this.files.push(item));\n    console.log(this.files);\n  },\n  methods: {\n    // 将FormItem数组转换为 validate() 返回的promise数组\n    // 调用 LForm 组件的 validate 方法可以得到表单数据校验的结果\n    async validate(callback) {\n      let tasks = this.files.map(item => item.validate());\n      console.log(tasks);\n\n      // 获取所有结果统一处理\n      const results = await Promise.all(tasks);\n\n      let ret = true;\n      results.forEach(valid => {\n        if (!valid) {\n          ret = false; // 只要一个失败就失败\n        }\n      });\n      callback(ret);\n    }\n  }\n};\n</script>"],"sourceRoot":"src/form"}]}